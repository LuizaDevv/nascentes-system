<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2180A0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Contagem das Nascentes">
    
    <title>Contagem das Nascentes</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header class="header">
            <div class="header-top">Etapa <span id="etapaAtual">0</span> de 11</div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            <div class="step-info">M√ìDULO <span id="moduloAtual">0</span> DE 10</div>
        </header>

        <!-- MAIN -->
        <main class="main">
            <!-- TELA INICIAL -->
            <div class="module active" id="module-inicial">
                <div style="text-align: center; padding: 40px 20px;">
                    <div style="font-size: 60px; margin-bottom: 20px;">üíß</div>
                    <h1 style="font-size: 32px; font-weight: 700; margin-bottom: 16px;">Contagem das Nascentes</h1>
                    <p style="font-size: 18px; color: var(--text-light); margin-bottom: 32px; line-height: 1.6;">
                        Ajude a proteger as fontes de √°gua da nossa regi√£o
                    </p>
                    <button class="btn btn-primary" onclick="proximoModulo()" style="width: 100%; margin-bottom: 12px;">
                        <span>Cadastrar uma Nova Nascente</span>
                    </button>
                </div>
            </div>

            <!-- M√ìDULO 1: IDENTIFICA√á√ÉO -->
            <div class="module" id="module-1">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 1 DE 10</div>
                    <h2>SUA IDENTIFICA√á√ÉO</h2>
                </div>

                <div class="form-group">
                    <label class="form-label">Nome do Respons√°vel pelo Preenchimento</label>
                    <input type="text" class="input-large" id="responsavel_nome" placeholder="Digite seu nome completo">
                </div>

                <div class="form-group">
                    <label class="form-label">Telefone com DDD</label>
                    <input type="tel" class="input-large" id="responsavel_telefone" placeholder="(31) 99999-9999">
                </div>

                <div class="form-group">
                    <label class="form-label">A nascente possui cuidador?</label>
                    <div class="choices-grid" id="temCuidadorChoices"></div>
                </div>

                <div class="form-group" id="cuidadorInfoGroup" style="display: none;">
                    <label class="form-label">Nome do Cuidador</label>
                    <input type="text" class="input-large" id="cuidador_nome" placeholder="Nome (opcional)">
                </div>

                <div class="form-group" id="cuidadorTelefoneGroup" style="display: none;">
                    <label class="form-label">Telefone do Cuidador</label>
                    <input type="tel" class="input-large" id="cuidador_telefone" placeholder="(31) 99999-9999 (opcional)">
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 2: LOCALIZA√á√ÉO E DATA -->
            <div class="module" id="module-2">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 2 DE 10</div>
                    <h2>LOCALIZA√á√ÉO E DATA DE REGISTRO</h2>
                </div>

                <button class="btn btn-warning" onclick="obterGPS()" style="width: 100%; background: #F97316; color: white; margin-bottom: 20px;">
                    üìç USAR MINHA LOCALIZA√á√ÉO ATUAL
                </button>

                <div class="form-group">
                    <label class="form-label">Coordenadas</label>
                    <input type="text" class="input-large" id="coordenadas" placeholder="Ser√° preenchido automaticamente" readonly>
                    <div class="hint-text">Latitude e Longitude</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Endere√ßo (Rua, N√∫mero, Bairro)</label>
                    <input type="text" class="input-large" id="endereco" placeholder="Ex: Rua das Flores, 123, Centro">
                </div>

                <div class="form-group">
                    <label class="form-label">Ponto de Refer√™ncia</label>
                    <input type="text" class="input-large" id="ponto_referencia" placeholder="Ex: perto da cachoeira, atr√°s do s√≠tio">
                </div>

                <div class="form-group">
                    <label class="form-label">Data do Registro</label>
                    <input type="date" class="input-large" id="data_registro">
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 3: BACIA HIDROGR√ÅFICA -->
            <div class="module" id="module-3">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 3 DE 10</div>
                    <h2>BACIA HIDROGR√ÅFICA</h2>
                    <p style="font-size: 16px; color: var(--text-light); margin-top: 12px;">A qual bacia a nascente pertence?</p>
                </div>

                <div class="choices-grid" id="baciaChoices"></div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 4: REGIONAL ADMINISTRATIVA -->
            <div class="module" id="module-4">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 4 DE 10</div>
                    <h2>REGIONAL ADMINISTRATIVA</h2>
                    <p style="font-size: 16px; color: var(--text-light); margin-top: 12px;">Qual a regional administrativa?</p>
                </div>

                <div class="choices-grid" id="regionalChoices"></div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 5: ASPECTO DA NASCENTE 01 -->
            <div class="module" id="module-5">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 5 DE 10</div>
                    <h2>ASPECTO DA NASCENTE 01</h2>
                </div>

                <div style="margin-bottom: 28px;">
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Forma - A √°gua brota de um ponto √∫nico ou espalhada?</p>
                    <div class="choices-grid" id="formaChoices"></div>
                </div>

                <div>
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Aspecto Visual - Qual a condi√ß√£o da √°gua?</p>
                    <div class="choices-grid" id="aspectoVisualChoices"></div>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 6: ASPECTO DA NASCENTE 02 -->
            <div class="module" id="module-6">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 6 DE 10</div>
                    <h2>ASPECTO DA NASCENTE 02</h2>
                </div>

                <div style="margin-bottom: 28px;">
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Condi√ß√£o Observada - Em que estado a nascente se encontra?</p>
                    <div class="choices-grid" id="condicaoObservadaChoices"></div>
                </div>

                <div>
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Vaz√£o - Qual a quantidade de √°gua que sai da nascente?</p>
                    <div class="choices-grid" id="vazaoChoices"></div>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 7: USO DA NASCENTE -->
            <div class="module" id="module-7">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 7 DE 10</div>
                    <h2>USO DA NASCENTE</h2>
                </div>

                <div style="margin-bottom: 28px;">
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Uso - Para que a √°gua desta nascente √© usada? (pode escolher v√°rias)</p>
                    <div class="choices-grid" id="usoChoices"></div>
                </div>

                <div>
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">An√°lise do Relevo</p>
                    <div class="choices-grid" id="analiseReleveChoices"></div>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 8: OBSERVA√á√ïES VISUAIS 01 -->
            <div class="module" id="module-8">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 8 DE 10</div>
                    <h2>OBSERVA√á√ïES VISUAIS</h2>
                </div>

                <div style="margin-bottom: 28px;">
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Migra√ß√£o de Ferro/√ìxidos - H√° sinais de ferrugem na √°gua ou nas pedras?</p>
                    <div class="choices-grid" id="migracaoFerroChoices"></div>
                </div>

                <div style="margin-bottom: 28px;">
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Cobertura do Solo</p>
                    <div class="choices-grid" id="coberturaSoloChoices"></div>
                </div>

                <div>
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Forma√ß√£o de Canal</p>
                    <div class="choices-grid" id="formacaoCanalChoices"></div>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 9: OBSERVA√á√ïES VISUAIS 02 -->
            <div class="module" id="module-9">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 9 DE 10</div>
                    <h2>OBSERVA√á√ïES VISUAIS 02</h2>
                </div>

                <div style="margin-bottom: 28px;">
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Deposi√ß√£o de Esgoto - H√° esgotamento sanit√°rio na nascente/curso d'√°gua?</p>
                    <div class="choices-grid" id="esgoroDepositoChoices"></div>
                </div>

                <div style="margin-bottom: 28px;">
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">Acesso</p>
                    <div class="choices-grid" id="acessoChoices"></div>
                </div>

                <div>
                    <p style="font-size: 16px; color: var(--text-light); margin-bottom: 12px;">A nascente est√° em √°rea verde?</p>
                    <div class="choices-grid" id="areaVerdeChoices"></div>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Pr√≥ximo ‚Üí</button>
                </div>
            </div>

            <!-- M√ìDULO 10: IMAGENS -->
            <div class="module" id="module-10">
                <div class="module-title">
                    <div class="module-subtitle">M√ìDULO 10 DE 10</div>
                    <h2>IMAGENS</h2>
                    <p style="font-size: 16px; color: var(--text-light); margin-top: 12px;">Envie at√© 3 fotos da nascente (opcional)</p>
                </div>

                <button class="btn btn-success" onclick="adicionarFoto()" style="width: 100%;">
                    [+] Adicionar Foto
                </button>

                <div id="fotoInfo" style="margin-top: 16px; font-size: 15px; color: var(--text-light);">
                    Fotos: 0/3
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar</button>
                    <button class="btn btn-primary" onclick="proximoModulo()">Revisar ‚Üí</button>
                </div>
            </div>

            <!-- RESUMO FINAL -->
            <div class="module" id="module-resumo">
                <div class="module-title">
                    <h2>Confira Seus Dados</h2>
                    <p style="font-size: 16px; color: var(--text-light); margin-top: 12px;">Verifique se TUDO est√° CORRETO antes de ENVIAR</p>
                </div>

                <div class="summary-box" id="summaryContent"></div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="voltarModulo()">Voltar e Corrigir</button>
                    <button class="btn btn-success" onclick="enviarFormulario()">ENVIAR TUDO ‚úì</button>
                </div>
            </div>

            <!-- SUCESSO -->
            <div class="module" id="module-sucesso">
                <div class="success-screen">
                    <div class="success-icon">‚úì</div>
                    <div class="success-title">Enviado com Sucesso!</div>
                    <div class="success-text">
                        Obrigado por ajudar a proteger as nascentes da nossa regi√£o!
                    </div>
                    <div class="success-text">
                        Seus dados foram SALVOS com SUCESSO!
                    </div>
                    <div class="success-warning">
                        ‚ö†Ô∏è N√ÉO PODE MAIS VOLTAR ATR√ÅS
                    </div>
                </div>
            </div>
        </main>

        <!-- MODAL -->
        <div class="modal" id="feedbackModal">
            <div class="modal-content">
                <p id="feedbackMessage"></p>
                <button class="btn btn-primary" onclick="fecharModal()" style="width: 100%;">OK</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('‚úì Service Worker'))
                .catch(err => console.log('‚úó Erro:', err));
        }
    </script>
</body>
</html>
